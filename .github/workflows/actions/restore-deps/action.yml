name: 'Restore Dependencies'
description: 'Restores cached build dependencies'

inputs:
  cache-key:
    description: 'Cache prefix'
    required: true

runs:
  using: 'composite'
  steps:
    - name: Restore Chocolatey packages
      uses: actions/cache@v3
      with:
        path: |
          C:\ProgramData\chocolatey\lib\ninja
          C:\Program Files\OpenCppCoverage
        key: ${{ inputs.cache-key }}-${{ hashFiles('.github/workflows/actions/restore-deps/action.yml') }}
        restore-keys: |
          ${{ inputs.cache-key }}-

    - name: Set path
      shell: pwsh
      run: |
        $env:PATH = "$env:PATH;C:\ProgramData\chocolatey\lib\ninja\tools;C:\Program Files\OpenCppCoverage"
